@{
    Layout = "_LayoutAdmin";
}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
<main class="main-content">
    <div class="container">
        <div class="survey-header">
            <h2>Detalles de la encuesta:</h2>
            <br /><br />
            <h2 class="survey-subtitle" id="encuesta-titulo"></h2>
        </div>

        <ul class="question-list" id="preguntas-lista">
         
        </ul>
    </div>
</main>

<script>
    document.addEventListener("DOMContentLoaded", async function () {
        const params = new URLSearchParams(window.location.search);
        const encuestaId = params.get("id");
        const token = localStorage.getItem("token");

        if (!encuestaId || !token) {
            alert("Sesión expirada o ID inválido");
            window.location.href = "/Admin/Encuestas";
            return;
        }

        try {
            const response = await fetch(`https://apiencuestase8.websitos256.com/api/encuestas/${encuestaId}`, {
                headers: {
                    "Authorization": `Bearer ${token}`
                }
            });

            if (!response.ok) {
                throw new Error("No se pudo cargar la encuesta");
            }

            const encuesta = await response.json();
            document.getElementById("encuesta-titulo").textContent = encuesta.titulo;

            const lista = document.getElementById("preguntas-lista");
            lista.innerHTML = "";

            encuesta.preguntas.forEach(p => {
                const li = document.createElement("li");
                li.textContent = `${p.numeroPregunta}. ${p.descripcion}`;
                lista.appendChild(li);
            });
        } catch (error) {
            console.error(error);
            alert("Error al cargar los datos de la encuesta.");
        }
    });
</script>
